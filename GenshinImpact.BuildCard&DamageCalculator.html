<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>キャラクター一覧</title>
<style>
  body { font-family: sans-serif; background: #f0f0f0; padding: 20px; }
  .character-list { display: flex; flex-wrap: wrap; gap: 15px; }
  .character { background: #fff; border-radius: 10px; padding: 10px; text-align: center; width: 120px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
  .character img { width: 80px; height: 80px; object-fit: contain; }
  .character-name { margin-top: 8px; font-weight: bold; font-size: 0.9em; }
</style>
</head>
<body>

<h2>キャラクター一覧</h2>
<div class="character-list" id="characterList">取得中...</div>

<script>
async function loadCharacters(uid) {
  const container = document.getElementById("characterList");
  container.innerHTML = "";
  
  try {
    const res = await fetch(`https://enka.network/api/uid/${uid}`);
    const data = await res.json();
    const avatars = data.avatars; // avatars配列
    
    avatars.forEach(av => {
      const div = document.createElement("div");
      div.className = "character";
      
      const img = document.createElement("img");
      img.src = `https://enka.network/ui/${av.icon}.png`; // APIのicon名を使用
      img.alt = av.name;
      img.onerror = () => { img.src = "default_icon.png"; }; // 404回避
      
      const nameDiv = document.createElement("div");
      nameDiv.className = "character-name";
      nameDiv.textContent = av.name;
      
      div.appendChild(img);
      div.appendChild(nameDiv);
      container.appendChild(div);
    });
    
  } catch (err) {
    container.innerHTML = "キャラクター情報の取得に失敗しました";
    console.error(err);
  }
}

// ここに対象UIDを入れる
loadCharacters(840804051);
</script>

</body>
</html>
